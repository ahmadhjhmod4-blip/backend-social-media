<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <title>لوحة المشرفين - Saepel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="/assets/admin/admin.css" />

    <style>
      .admin-topbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
      }

      .admin-topbar-title {
        font-size: 1.1rem;
        font-weight: 600;
      }

      .admin-topbar-actions {
        display: flex;
        gap: 8px;
      }

      .admin-chip {
        border-radius: 999px;
        padding: 6px 10px;
        font-size: 0.8rem;
        border: 1px solid rgba(140, 150, 255, 0.5);
        background: rgba(15, 20, 45, 0.9);
      }

      .admin-chip span {
        opacity: 0.8;
      }

      .admin-btn-small {
        border-radius: 999px;
        border: 1px solid rgba(140, 150, 255, 0.6);
        background: transparent;
        color: #e5e7ff;
        font-size: 0.8rem;
        padding: 6px 10px;
        cursor: pointer;
      }

      .admin-btn-small:hover {
        background: rgba(120, 130, 255, 0.1);
      }

      .admin-filters {
        display: flex;
        gap: 6px;
        margin-bottom: 10px;
        flex-wrap: wrap;
      }

      .filter-pill {
        padding: 5px 10px;
        border-radius: 999px;
        border: 1px solid rgba(130, 140, 250, 0.5);
        font-size: 0.8rem;
        background: transparent;
        color: #e5e7ff;
        cursor: pointer;
      }

      .filter-pill.active {
        background: linear-gradient(135deg, #6a7bff, #9d6bff);
        border-color: transparent;
      }

      .reports-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
        max-height: 40vh;
        overflow-y: auto;
        padding-right: 4px;
        margin-bottom: 12px;
      }

      .report-card {
        border-radius: 14px;
        padding: 10px 12px;
        background: rgba(7, 10, 34, 0.9);
        border: 1px solid rgba(110, 125, 255, 0.35);
      }

      .report-header {
        display: flex;
        justify-content: space-between;
        gap: 6px;
        margin-bottom: 4px;
      }

      .report-badge {
        font-size: 0.75rem;
        padding: 3px 8px;
        border-radius: 999px;
        display: inline-block;
      }

      .badge-pending {
        background: rgba(255, 196, 86, 0.15);
        color: #ffd27b;
        border: 1px solid rgba(255, 196, 86, 0.6);
      }

      .badge-accepted {
        background: rgba(92, 214, 151, 0.18);
        color: #9df2c5;
        border: 1px solid rgba(92, 214, 151, 0.7);
      }

      .badge-rejected {
        background: rgba(255, 112, 112, 0.18);
        color: #ffc0c0;
        border: 1px solid rgba(255, 112, 112, 0.7);
      }

      .report-section-title {
        font-size: 0.78rem;
        opacity: 0.8;
        margin-bottom: 2px;
      }

      .report-post-text {
        font-size: 0.88rem;
        margin-bottom: 2px;
      }

      .report-small {
        font-size: 0.78rem;
        opacity: 0.85;
      }

      .report-actions {
        margin-top: 8px;
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
      }

      .btn-accept {
        background: linear-gradient(135deg, #4caf50, #66bb6a);
        border: none;
        color: #fff;
      }

      .btn-reject {
        background: transparent;
        border-color: rgba(255, 140, 140, 0.7);
        color: #ffb3b3;
      }

      .report-empty {
        text-align: center;
        font-size: 0.85rem;
        opacity: 0.8;
        margin-top: 8px;
      }

      .admin-divider {
        height: 1px;
        margin: 10px 0 14px;
        background: linear-gradient(
          to right,
          transparent,
          rgba(140, 150, 255, 0.5),
          transparent
        );
        opacity: 0.7;
      }

      /* ===== إدارة المستخدمين / المشرفين ===== */
      .admin-users-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 10px;
        margin-bottom: 8px;
      }

      .admin-section-title {
        font-size: 0.95rem;
        font-weight: 600;
      }

      #userSearchInput {
        flex: 1;
        min-width: 0;
        background: rgba(7, 10, 34, 0.9);
        border-radius: 999px;
        border: 1px solid rgba(120, 130, 255, 0.7);
        color: #e5e7ff;
        padding: 6px 10px;
        font-size: 0.8rem;
        outline: none;
      }

      #userSearchInput::placeholder {
        color: rgba(200, 205, 255, 0.6);
      }

      .users-list {
        display: flex;
        flex-direction: column;
        gap: 8px;
        max-height: 35vh;
        overflow-y: auto;
        padding-right: 4px;
      }

      .user-card {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 8px;
        border-radius: 12px;
        padding: 8px 10px;
        background: rgba(6, 9, 30, 0.95);
        border: 1px solid rgba(100, 110, 240, 0.3);
      }

      .user-main {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .user-name-line {
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .user-name {
        font-size: 0.9rem;
      }

      .user-email {
        font-size: 0.78rem;
        opacity: 0.8;
      }

      .badge-admin {
        font-size: 0.7rem;
        padding: 2px 8px;
        border-radius: 999px;
        background: rgba(120, 130, 255, 0.15);
        border: 1px solid rgba(150, 160, 255, 0.8);
        color: #e5e7ff;
      }

      .badge-normal {
        font-size: 0.7rem;
        padding: 2px 8px;
        border-radius: 999px;
        background: rgba(100, 255, 210, 0.07);
        border: 1px solid rgba(100, 255, 210, 0.5);
        color: #b5ffe9;
      }

      .badge-self {
        font-size: 0.7rem;
        padding: 2px 8px;
        border-radius: 999px;
        background: rgba(255, 215, 130, 0.1);
        border: 1px solid rgba(255, 215, 130, 0.7);
        color: #ffe7ae;
      }

      .user-actions {
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
        justify-content: flex-end;
      }

      .btn-make-admin {
        background: linear-gradient(135deg, #6a7bff, #9d6bff);
        border: none;
        color: #fff;
      }

      .btn-remove-admin {
        background: transparent;
        border-color: rgba(255, 165, 120, 0.8);
        color: #ffd8c0;
      }

      .users-empty {
        text-align: center;
        font-size: 0.82rem;
        opacity: 0.8;
        margin-top: 6px;
      }

      @media (max-width: 600px) {
        .reports-list {
          max-height: 38vh;
        }
        .users-list {
          max-height: 32vh;
        }
      }
    </style>
  </head>
  <body>
    <div class="admin-page">
      <div class="admin-card">
        <div class="admin-topbar">
          <div>
            <div class="admin-topbar-title">لوحة المشرفين - Saepel</div>
            <div class="admin-chip" id="adminUserInfo">
              <span>مرحباً، مشرف</span>
            </div>
          </div>
          <div class="admin-topbar-actions">
            <button id="btnGoHome" class="admin-btn-small">
              الصفحة الرئيسية
            </button>
            <button id="btnLogout" class="admin-btn-small">
              تسجيل الخروج
            </button>
          </div>
        </div>

        <!-- ===== قسم البلاغات ===== -->
        <div class="admin-filters">
          <button class="filter-pill active" data-status="all">
            كل البلاغات
          </button>
          <button class="filter-pill" data-status="pending">
            قيد المراجعة
          </button>
          <button class="filter-pill" data-status="accepted">
            مقبولة
          </button>
          <button class="filter-pill" data-status="rejected">
            مرفوضة
          </button>
        </div>

        <div id="adminDashMsg" class="admin-error" style="display: none"></div>

        <div id="reportsList" class="reports-list">
          <!-- البلاغات -->
        </div>

        <div id="emptyState" class="report-empty" style="display: none">
          لا توجد بلاغات حالياً.
        </div>

        <div class="admin-divider"></div>

        <!-- ===== قسم إدارة المستخدمين / المشرفين ===== -->
        <section>
          <div class="admin-users-header">
            <div class="admin-section-title">
              إدارة المستخدمين والمشرفين
            </div>
            <input
              id="userSearchInput"
              type="text"
              placeholder="بحث عن مستخدم بالاسم أو البريد..."
            />
          </div>

          <div id="usersList" class="users-list">
            <!-- المستخدمين -->
          </div>

          <div
            id="usersEmptyState"
            class="users-empty"
            style="display: none"
          >
            لا يوجد مستخدمون مطابقون لبحثك.
          </div>
        </section>
      </div>
    </div>

    <script src="/assets/admin/admin-dashboard.js"></script>
  </body>
</html>
